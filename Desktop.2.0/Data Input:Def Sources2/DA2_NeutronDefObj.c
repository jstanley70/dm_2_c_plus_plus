#include	"Diffract_INCs.h"#include 	"defineElectronObj.h"#include 	"NeutronDefObj.h"#define PLANCKSCONSTANT	6.626e-34#define GASCONSTANT 8.314#define BOLTSMANN	1.38e-23#define NUETRONMASS 1.675e-27#define ELCHARGE  1.602e-19void NeutronDefObj::DoClose(void){	short i;	inherited::DoClose();}void NeutronDefObj::DoInit(long	owner){	inherited::DoInit(owner);	temperature = 300.;	energy = 3. * BOLTSMANN * temperature / ELCHARGE;	wavelength = .28 / sqrt(energy);	}float NeutronDefObj::SetVOLTAGE(void){	return temperature;}void  NeutronDefObj::SetFluff(DialogPtr theDialog){	GetDItem(theDialog,VOLTLABEL,&gType,&gTheHandle,&gTheRect);	sprintf(gTheText,"Temperature");	SetIText(gTheHandle,c2pstr(gTheText));	GetDItem(theDialog,VOLTUNITS,&gType,&gTheHandle,&gTheRect);	sprintf(gTheText,"K");	SetIText(gTheHandle,c2pstr(gTheText));}void	NeutronDefObj::InitPopUpMenu(DialogPtr theDialog,PopUpMenu *popUpMenu){	popUpMenu->Init(theDialog,POPUPMENUKV,112,charWaveLength);}void  NeutronDefObj::DoPopMenuComplete(DialogPtr theDialog,PopUpMenu *popUpMenu){	Rect theRect;	short type;		charWaveLength 	= popUpMenu->DoPopUp();		popUpMenu		->	P_GetCItemText(gTheText);	SetWaveAndEnergy	(atof((p2cstr(pTheText))));	GetDItem			(theDialog,VOLTAGE,&type,&gTheHandle,&theRect);	sprintf				(gTheText,"%5.2f",energy);	SetIText			(gTheHandle,c2pstr(gTheText));}void  NeutronDefObj::SetWaveAndEnergy(float theValue){	temperature = theValue;	energy = 3. * BOLTSMANN * temperature / ELCHARGE;	wavelength = .28 / sqrt(energy);}void NeutronDefObj::ReadBeam(void){	inherited::ReadBeam();	temperature = gTheFile->ReadFloat();}void NeutronDefObj::WriteBeam(void){	inherited::WriteBeam();	gTheFile->WriteFloat(temperature);}