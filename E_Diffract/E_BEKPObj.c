//s.Jim:E_Diffract:E_BEKPObj.c#include 	"BEKPObj.h"void	BEKPObj::DoInit(void){	beamIsSet = false;	if(gTheFile->file_is_Open)		beamIsSet = true;	theBeamFlag = 1;	inherited::DoInit();			return;}void	BEKPObj::DoDefine(void){	if(!beamIsSet){		SetupBeam();		SetScaleFactor();		beamIsSet = true;	}	inherited::DoDefine();}void	BEKPObj::FinishSetUp(void){		inherited::FinishSetUp();	theRuler->EnableButtons(4);		if(gTheFile->file_is_Open){		return;	}	sprintf(gTheText,"BEKP %d",g_Window_Number - 1);	SetWTitle(theWindow,c2pstr(gTheText));	centerX = (theWindow->portRect.right + theWindow->portRect.left) / 2;	centerY = (theWindow->portRect.bottom + theWindow->portRect.top) / 2;	}	void	BEKPObj::SetupBeam(void){		theBeamFlag = 1;	energy 						=  theEBeam->energy;	wavelength 					= theEBeam->wavelength;	theEBeam->maxEnergy 		= energy;		/* Eric, I just feel its better to let the person set the beam parameters	before going into the image...not everyone is going to want 30kV	theEBeam->SetWaveAndEnergy(30.0);	camLength = 125.0;	theEBeam->ReturnCameraConstant(&camLength);		theEBeam->cameraConstant 	= camLength;	energy =  theEBeam->energy;	theEBeam->maxEnergy 		= energy;	theEBeam->energy			= energy;	wavelength 		= theEBeam->wavelength;	maxEnergy 		= energy;	cameraConstant	= theEBeam->cameraConstant;	*/}Ptr AllocBEKPObj(void){	BEKPObj	*theObj;		theObj	=	(BEKPObj*)D_new(BEKPObj);	if(HandleIsOK((Handle)theObj)){		theObj->objectType		= BEKP_OBJECT;		theObj->DoInit();		return((Ptr)theObj);	} else {		return(NUL_PTR);	}}