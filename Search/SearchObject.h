//Jim:Search:SearchObject.h#ifndef _SEARCHOBJ#define _SEARCHOBJ #include	"alloyCompEnt.h"#include	"ListCrystal.h"#define DLOG_SEARCH 301enum{	SEARCH = 1,	QUITJPDS,	ENTERDSPACE,	SEARCHDIFV2,	PRINT_FOUND,	POPUPCRYSTALS,	INPUTDSPACE,	DSPACERECT,	DSPSCROLLRECT,	MATCHRECT,	MSCROLLRECT,	FOM,	TOTALMATCH,	CAMERACONSTANT,	SEARCH_TYPE_POPUP,	SEARCHCHEM,	DELETECRYS,	DISPLAYDATA,	SELECTCRYS,	REFERENCE,	ELIMINATEREDUN,	WAVELENGTH,	FOMLABEL,	JCPDFFULLDISPLAY = 34};enum{	DSPACE_SEARCH = 1,	G_VECTOR_SEARCH,	TWO_THETA_SEARCH,	VOL_SEARCH_D = 5,	VOL_SEARCH_G,	VOL_SEARCH_TWO,	USER_SEARCH_D	=	9,	USER_SEARCH_G,	USER_SEARCH_TWO};typedef struct LogicObj{	short	spaceGrpLow;	short	spaceGrpHigh;	float volumeLow;	float volumeHigh;	float densityLow;	float densityHigh;	float crysLow[6];	float crysHigh[6];	char subFile[20];	short crysSys;	char mineralName[40];	char pearsonSym[5];	short cdfID;	char organic[20];	short yearLow;	short yearHigh;	char author[20];	short casNum;	char  CODEN[20];	}LogicObj;typedef struct  DataBaseLoc{	long int	offSet;	long int	size;}DataBaseLoc;typedef struct EDDIndex{	unsigned short	theChemMap[6];}EDDIndex;typedef struct FilePtr{	unsigned short	filePosition;	unsigned short  spare;}FilePtr;typedef struct EDDSearchFile{	 unsigned short		theChemMap[6];	 unsigned short		theRMap[11];	 unsigned short		spaceGroup;	 unsigned short		unitCellEdge[3];	 unsigned short		reducedUCEdge[3];	 unsigned short		reducedVolume;	 unsigned short		flags;	 FilePtr			refFilePtr; }EDDSearchFile;DataBaseLoc** TestForExclusion(DataBaseLoc** values,DataBaseLoc** values2,long total1,long *total2);DataBaseLoc** TestForUnion(DataBaseLoc** values,DataBaseLoc** values2,long total1,long *total2);class SearchObject:public AlloyCompDef{public:	DialogPtr		theDialogSearch;	ListHandle 		theDspaceList;	Cell			gtheCell;	float			cameraConstant;	float			wavelength;	float			*dspacings;	float			*currentList;	float			delDspace[20];	short			minMatches;	short			noOfDspace;	short			requiredFOM;	float			expVolume;	short			totalFound;	PopUpMenu		*theCRYSMenu;	PopUpMenu		*searchTypePopUp;	ListHandle		theFoundList;	ListCrystal		*foundCrystals;	/*added for V2.0*/	Crystal			*testCrystal;	Crystal			*comparisonCrystal;	PopUpMenu		*databaseMenu;	short				logicFlags[40];	LogicObj    logicFields;	void		Init(void);	void		Kill					(void);	Boolean 	DoDefine				(void);	void		SearchByDSpace			(float *dspacings,float cameraConstant,float wavelength,short dialogType);	void		SetListings				(void);	void		ExcludeElements			(short i,short j);	void		SetPopUp				(MenuHandle theMenu,Rect theRect,short theItem);	void		InitListings			(void);	void		HandleListRect			(void);	void		RecursiveFindHFS		(void);	void 		HFSEnumerateCat			(FSSpec	theFSSpec);	Boolean 	RunTestDiffractDspace	(Crystal* testCrystal);	void		DoSearchDspace			(void);	void		WriteList				(void);	void		InitFoundListings		(void);	Boolean		DoNewCrystalList		(short lastCrystal,long *refNo1,long *refNo2,short display);	void		PlotRings				(float scaleFactor,float scaleFactorY,short centerX,short centerY,double minPlottedX,double maxPlottedX);	void		DoMenu					(long theResult);	void		FindJCPDS				(void);	Boolean 	OpenJCPDFile			(short *vRefNum,short *refNum);	short		CompareMap				(unsigned short *Map1,unsigned short *Map2,short size);	void		ReadIndexFile			(short refNum,unsigned short *theCSReq,unsigned short *theCSX);	void 		SetChemScreen			(unsigned short *theCSReq,unsigned short *theCSPos,unsigned short *theCSX,Boolean macFlag);	void 		SetRMap					(unsigned short *theRMap);	void 		MatchSearchFile			(short refNum,short blockNums,unsigned short *theCSReq,unsigned short *theCSX,unsigned short *theRMap,short noReq);	void 		ReturnSearchFileDspace	(unsigned short *theRMap,float *theDspacings);	Boolean 	GetJPDSSearchCrystal	(long blockNum,long crystalNum);	void		DrawSearchBitMap		(short refNum,short offSet);	void 		DrawSearchRects			(void);	short 		SearchFOM				(unsigned short *storedRMap);	short 		TestCrystalFOM			(float *dspacings);	Boolean 	GetReferenceFileInfo	(short theFile,short theBlockNo);	void 		PlotComparativeLines	(Rect bigRect);	void		EliminateRedundancies	(void);	void		ConvertDspaceToCurrentList	(void);	void		ConvertCurrentListToDspace	(void);	void 		SetAndConvertLists		(void);	/* added for V2.0*/	void 		SearchJCPDFFiles(short dataBase);	Boolean  	OpenMasterIndex(long entryNumber,long *offSet,long *size,short crystAtTime,short dataBase);	Boolean  	GetJCPDFSearchCrystal	(long k,short crysAtATime,short dataBase,short display);	Boolean 	GetSingleJCPDFSearchCrystal	(long offSet,long fileSize,short dataBase,short display);	void 		SetSearchLogic(void);	void		PrintFoundCrystals(void);	void		StripAllFiles(void);	void 		SaveStrippedCrystals(void);	void 		GetStrippedCryslal(short theCrystalNo);	void 		CreateNewFile(void);	void 		StripFiles(short blockNums);	void JCPDFFullDisplay(short lastCrystal);};#endif